<!DOCTYPE html>
<html lang="fr" class="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, maximum-scale=1.0, user-scalable=no" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <title>NEON FIT V4 // MISSION COMPLETE</title>
  
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600;700;800&family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            void: '#020408',
            'void-soft': '#0a0f14',
            cyan: '#22d3ee',
            magenta: '#c084fc',
            amber: '#f59e0b',
            lime: '#84cc16',
            purple: '#a855f7',
            emerald: '#10b981'
          },
          fontFamily: {
            display: ['Orbitron', 'sans-serif'],
            mono: ['JetBrains Mono', 'monospace'],
            body: ['Inter', 'sans-serif']
          }
        }
      }
    }
  </script>
  
  <style>
    :root {
      --cyan: #22d3ee;
      --magenta: #c084fc;
      --amber: #f59e0b;
      --lime: #84cc16;
      --purple: #a855f7;
      --emerald: #10b981;
      --void: #020408;
    }
    
    html, body {
      height: 100%;
      overflow-x: hidden;
      background: var(--void);
    }
    
    body {
      font-family: 'Inter', sans-serif;
      color: white;
      min-height: 100dvh;
      padding-top: env(safe-area-inset-top);
      -webkit-tap-highlight-color: transparent;
    }
    
    .font-display { font-family: 'Orbitron', sans-serif; }
    .font-mono { font-family: 'JetBrains Mono', monospace; }
    
    /* Glass Panel */
    .glass-panel {
      background: rgba(10, 15, 20, 0.9);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 24px;
    }
    
    /* Stats Card */
    .stats-card {
      background: linear-gradient(135deg, rgba(34, 211, 238, 0.1), rgba(192, 132, 252, 0.05));
      border: 1px solid rgba(34, 211, 238, 0.2);
      border-radius: 20px;
      padding: 20px;
    }
    
    /* Progress bar */
    .progress-bar {
      height: 8px;
      border-radius: 4px;
      background: rgba(255,255,255,0.1);
      overflow: hidden;
    }
    
    .progress-fill {
      height: 100%;
      border-radius: 4px;
      transition: width 1s ease-out;
    }
    
    /* XP animation */
    @-webkit-keyframes xp-counter {
      0% { -webkit-transform: scale(1); transform: scale(1); }
      50% { -webkit-transform: scale(1.2); transform: scale(1.2); }
      100% { -webkit-transform: scale(1); transform: scale(1); }
    }
    @keyframes xp-counter {
      0% { transform: scale(1); }
      50% { transform: scale(1.2); }
      100% { transform: scale(1); }
    }
    
    .xp-animate {
      -webkit-animation: xp-counter 0.5s ease-out;
      animation: xp-counter 0.5s ease-out;
    }
    
    /* Confetti */
    @-webkit-keyframes confetti-fall {
      0% { -webkit-transform: translateY(-100vh) rotate(0deg); transform: translateY(-100vh) rotate(0deg); opacity: 1; }
      100% { -webkit-transform: translateY(100vh) rotate(720deg); transform: translateY(100vh) rotate(720deg); opacity: 0; }
    }
    @keyframes confetti-fall {
      0% { transform: translateY(-100vh) rotate(0deg); opacity: 1; }
      100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
    }
    
    .confetti {
      position: fixed;
      width: 10px;
      height: 10px;
      -webkit-animation: confetti-fall 3s ease-out forwards;
      animation: confetti-fall 3s ease-out forwards;
    }
    
    /* Muscle bar */
    .muscle-bar {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 12px;
    }
    
    .muscle-bar-name {
      width: 80px;
      font-size: 12px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }
    
    .muscle-bar-track {
      flex: 1;
      height: 12px;
      border-radius: 6px;
      background: rgba(255,255,255,0.05);
      overflow: hidden;
    }
    
    .muscle-bar-fill {
      height: 100%;
      border-radius: 6px;
      transition: width 1s ease-out;
    }
    
    .muscle-bar-value {
      width: 40px;
      text-align: right;
      font-family: 'JetBrains Mono', monospace;
      font-weight: 700;
      font-size: 14px;
    }
    
    /* PR Badge */
    .pr-badge {
      background: linear-gradient(135deg, #fbbf24, #f59e0b);
      color: black;
      padding: 4px 12px;
      border-radius: 8px;
      font-size: 11px;
      font-weight: 800;
      text-transform: uppercase;
      letter-spacing: 0.1em;
    }
    
    /* Insight Card */
    .insight-card {
      background: linear-gradient(135deg, rgba(16, 185, 129, 0.15), rgba(16, 185, 129, 0.05));
      border: 1px solid rgba(16, 185, 129, 0.3);
      border-left: 4px solid #10b981;
      border-radius: 16px;
      padding: 16px;
    }
    
    /* Button */
    .btn-primary {
      min-height: 60px;
      background: linear-gradient(135deg, var(--cyan), #06b6d4);
      border-radius: 20px;
      font-weight: 800;
      font-size: 16px;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      box-shadow: 0 0 40px rgba(34, 211, 238, 0.4);
      transition: transform 0.1s;
    }
    
    .btn-primary:active {
      transform: scale(0.97);
    }
    
    /* Hidden */
    .hidden { display: none !important; }
  </style>
</head>

<body>
  
  <!-- Confetti Container -->
  <div id="confetti-container" class="fixed inset-0 pointer-events-none z-50"></div>
  
  <!-- Main Content -->
  <div class="px-4 py-6 pb-8" style="padding-bottom: calc(env(safe-area-inset-bottom) + 32px);">
    
    <!-- Header -->
    <div class="text-center mb-8">
      <div class="inline-flex items-center justify-center w-20 h-20 rounded-full bg-gradient-to-br from-emerald/20 to-cyan/20 border-2 border-emerald mb-4">
        <span class="text-4xl">‚úì</span>
      </div>
      <h1 class="font-display font-black text-3xl text-white mb-2">MISSION ACCOMPLIE</h1>
      <div class="flex items-center justify-center gap-2">
        <span class="text-4xl xp-animate font-display font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan to-magenta" style="-webkit-background-clip: text;" id="total-xp">+850 XP</span>
      </div>
    </div>
    
    <!-- Stats Card -->
    <div class="stats-card mb-6">
      <div class="grid grid-cols-3 gap-4 text-center">
        <div>
          <div class="font-mono font-bold text-2xl text-white" id="duration">72</div>
          <div class="text-xs text-white/50 uppercase">min</div>
        </div>
        <div>
          <div class="font-mono font-bold text-2xl text-white" id="volume">12,450</div>
          <div class="text-xs text-white/50 uppercase">kg</div>
        </div>
        <div>
          <div class="font-mono font-bold text-2xl text-emerald" id="density">173</div>
          <div class="text-xs text-white/50 uppercase">kg/min</div>
        </div>
      </div>
    </div>
    
    <!-- Technical Quality -->
    <div class="glass-panel p-5 mb-6">
      <div class="flex items-center justify-between mb-3">
        <div class="text-xs font-bold text-white/50 uppercase tracking-widest">Qualite Technique</div>
        <div class="flex items-center gap-2">
          <span class="font-mono font-bold text-3xl text-cyan" id="tech-score">92</span>
          <span class="text-white/40">/100</span>
        </div>
      </div>
      <div class="progress-bar mb-3">
        <div class="progress-fill bg-gradient-to-r from-cyan to-emerald" id="tech-bar" style="width: 0%;"></div>
      </div>
      <div id="tech-message" class="text-sm text-white/60 italic">"Excellent controle tempo"</div>
    </div>
    
    <!-- Muscle Stimulus -->
    <div class="glass-panel p-5 mb-6">
      <div class="text-xs font-bold text-white/50 uppercase tracking-widest mb-4">Stimulus Musculaire</div>
      
      <div class="muscle-bar">
        <div class="muscle-bar-name text-cyan">Dos</div>
        <div class="muscle-bar-track">
          <div class="muscle-bar-fill bg-cyan" style="width: 85%;"></div>
        </div>
        <div class="muscle-bar-value text-cyan">17</div>
      </div>
      
      <div class="muscle-bar">
        <div class="muscle-bar-name text-lime">Jambes</div>
        <div class="muscle-bar-track">
          <div class="muscle-bar-fill bg-lime" style="width: 60%;"></div>
        </div>
        <div class="muscle-bar-value text-lime">12</div>
      </div>
      
      <div class="muscle-bar">
        <div class="muscle-bar-name text-purple">Bras</div>
        <div class="muscle-bar-track">
          <div class="muscle-bar-fill bg-purple" style="width: 40%;"></div>
        </div>
        <div class="muscle-bar-value text-purple">8</div>
      </div>
      
      <div class="muscle-bar">
        <div class="muscle-bar-name text-magenta">Pecs</div>
        <div class="muscle-bar-track">
          <div class="muscle-bar-fill bg-magenta" style="width: 0%;"></div>
        </div>
        <div class="muscle-bar-value text-white/30">0</div>
      </div>
      
      <div class="muscle-bar">
        <div class="muscle-bar-name text-amber">Epaules</div>
        <div class="muscle-bar-track">
          <div class="muscle-bar-fill bg-amber" style="width: 20%;"></div>
        </div>
        <div class="muscle-bar-value text-amber">4</div>
      </div>
      
    </div>
    
    <!-- Insight -->
    <div class="insight-card mb-6">
      <div class="flex items-start gap-3">
        <span class="text-xl">üí°</span>
        <div>
          <div class="text-xs font-bold text-emerald uppercase tracking-widest mb-1">Insight Actionnable</div>
          <div id="insight-text" class="text-sm text-white/80">"Ajoute 1 serie tirage horizontal cette semaine pour equilibrer le dos."</div>
        </div>
      </div>
    </div>
    
    <!-- PRs Section -->
    <div class="glass-panel p-5 mb-6" id="pr-section">
      <div class="text-xs font-bold text-white/50 uppercase tracking-widest mb-4">Records Battus</div>
      
      <div class="flex items-center justify-between py-3 border-b border-white/10">
        <div class="flex items-center gap-3">
          <span class="text-2xl">üèÜ</span>
          <div>
            <div class="font-display font-bold text-white">Trap Bar Deadlift</div>
            <div class="text-sm text-white/50">75kg √ó 6 ‚Üí <span class="text-amber font-bold">80kg √ó 6</span></div>
          </div>
        </div>
        <span class="pr-badge">PR!</span>
      </div>
      
      <div class="flex items-center justify-between py-3">
        <div class="flex items-center gap-3">
          <span class="text-2xl">üèÜ</span>
          <div>
            <div class="font-display font-bold text-white">Rowing Haltere</div>
            <div class="text-sm text-white/50">30kg √ó 10 ‚Üí <span class="text-amber font-bold">32kg √ó 10</span></div>
          </div>
        </div>
        <span class="pr-badge">PR!</span>
      </div>
      
    </div>
    
    <!-- Streak Info -->
    <div class="glass-panel p-4 mb-6">
      <div class="flex items-center justify-between">
        <div class="flex items-center gap-3">
          <span class="text-3xl">üî•</span>
          <div>
            <div class="font-display font-bold text-white">Streak Maintenu!</div>
            <div class="text-sm text-white/50">14 jours consecutifs</div>
          </div>
        </div>
        <div class="text-right">
          <div class="text-xs text-white/40 uppercase">Prochain bonus</div>
          <div class="font-mono font-bold text-amber">+500 XP a J21</div>
        </div>
      </div>
    </div>
    
    <!-- Level Progress -->
    <div class="glass-panel p-5 mb-8">
      <div class="flex items-center justify-between mb-3">
        <div>
          <div class="text-xs font-bold text-white/50 uppercase tracking-widest">Rang</div>
          <div class="font-display font-bold text-xl text-white">COMMANDO</div>
        </div>
        <div class="text-right">
          <div class="text-xs text-white/40">Niveau 23</div>
          <div class="font-mono text-sm text-cyan">2,450 / 3,000 XP</div>
        </div>
      </div>
      <div class="progress-bar">
        <div class="progress-fill bg-gradient-to-r from-cyan to-magenta" id="level-bar" style="width: 0%;"></div>
      </div>
      <div class="text-xs text-white/40 text-right mt-2">550 XP jusqu'au niveau 24</div>
    </div>
    
    <!-- Return Button -->
    <button id="btn-return" class="btn-primary w-full text-black font-display">
      RETOUR AU QG
    </button>
    
  </div>
  
  <script>
    // ========== CONFETTI ==========
    function createConfetti() {
      const container = document.getElementById('confetti-container');
      const colors = ['#22d3ee', '#c084fc', '#f59e0b', '#84cc16', '#10b981'];
      
      for (let i = 0; i < 50; i++) {
        const confetti = document.createElement('div');
        confetti.className = 'confetti';
        confetti.style.left = `${Math.random() * 100}%`;
        confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        confetti.style.animationDelay = `${Math.random() * 1}s`;
        confetti.style.animationDuration = `${2 + Math.random() * 2}s`;
        container.appendChild(confetti);
      }
      
      setTimeout(() => {
        container.innerHTML = '';
      }, 5000);
    }
    
    // ========== ANIMATE BARS ==========
    function animateBars() {
      setTimeout(() => {
        document.getElementById('tech-bar').style.width = '92%';
        document.getElementById('level-bar').style.width = '82%';
      }, 300);
    }
    
    // ========== LOAD DATA ==========
    function loadDebriefData() {
      const storedData = localStorage.getItem('neon_fit_last_workout');
      if (storedData) {
        try {
          const data = JSON.parse(storedData);
          // Update UI with actual data
          document.getElementById('duration').textContent = data.duration || 72;
          document.getElementById('volume').textContent = (data.volume || 12450).toLocaleString();
          document.getElementById('total-xp').textContent = `+${data.xp || 850} XP`;
        } catch (e) {
          console.log('Using default debrief data');
        }
      }
    }
    
    // ========== RETURN ==========
    document.getElementById('btn-return').addEventListener('click', () => {
      window.location.href = 'index-v4.html';
    });
    
    // ========== INIT ==========
    document.addEventListener('DOMContentLoaded', () => {
      createConfetti();
      animateBars();
      loadDebriefData();
    });
  </script>
  
</body>
</html>
