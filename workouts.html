<!DOCTYPE html>
<html lang="fr" class="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, maximum-scale=1.0, user-scalable=no" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <title>NEON FIT // OPÉRATIONS</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;800;900&family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
  <script src="program-data-v2.js"></script>
  <script src="scramble-effect.js"></script>
  
  <style>
    :root { 
      --void: #030509;
      --void-light: #0a0f18;
      --cyan: #22d3ee;
      --cyan-dim: rgba(34, 211, 238, 0.15);
      --purple: #a855f7;
      --pink: #ec4899;
      --green: #22c55e;
      --amber: #f59e0b;
    }
    
    * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
    
    body { 
      background: linear-gradient(180deg, var(--void) 0%, #050810 100%);
      font-family: 'Inter', -apple-system, sans-serif;
      color: #f1f5f9;
      min-height: 100dvh;
      overflow-x: hidden;
    }
    
    .font-display { font-family: 'Orbitron', sans-serif; }
    
    /* ========== STARFIELD BACKGROUND ========== */
    .starfield {
      position: fixed;
      inset: 0;
      overflow: hidden;
      pointer-events: none;
      z-index: 0;
    }
    
    .stars {
      position: absolute;
      width: 100%;
      height: 100%;
      background-image: 
        radial-gradient(1px 1px at 20px 30px, rgba(255,255,255,0.4), transparent),
        radial-gradient(1px 1px at 40px 70px, rgba(255,255,255,0.3), transparent),
        radial-gradient(1px 1px at 50px 160px, rgba(255,255,255,0.2), transparent),
        radial-gradient(1px 1px at 90px 40px, rgba(255,255,255,0.35), transparent),
        radial-gradient(1px 1px at 130px 80px, rgba(255,255,255,0.25), transparent),
        radial-gradient(1.5px 1.5px at 160px 120px, rgba(34,211,238,0.4), transparent),
        radial-gradient(1px 1px at 200px 50px, rgba(255,255,255,0.3), transparent),
        radial-gradient(1px 1px at 220px 150px, rgba(255,255,255,0.2), transparent),
        radial-gradient(1px 1px at 280px 90px, rgba(255,255,255,0.35), transparent),
        radial-gradient(1.5px 1.5px at 320px 200px, rgba(168,85,247,0.3), transparent),
        radial-gradient(1px 1px at 350px 60px, rgba(255,255,255,0.25), transparent),
        radial-gradient(1px 1px at 380px 180px, rgba(255,255,255,0.3), transparent),
        radial-gradient(1px 1px at 420px 30px, rgba(255,255,255,0.2), transparent);
      background-size: 450px 250px;
      animation: twinkle 8s ease-in-out infinite alternate;
    }
    
    .stars-2 {
      position: absolute;
      width: 100%;
      height: 100%;
      background-image: 
        radial-gradient(1px 1px at 70px 110px, rgba(255,255,255,0.3), transparent),
        radial-gradient(1px 1px at 110px 20px, rgba(255,255,255,0.25), transparent),
        radial-gradient(1.5px 1.5px at 180px 180px, rgba(34,211,238,0.35), transparent),
        radial-gradient(1px 1px at 240px 140px, rgba(255,255,255,0.2), transparent),
        radial-gradient(1px 1px at 300px 40px, rgba(255,255,255,0.35), transparent),
        radial-gradient(1px 1px at 360px 100px, rgba(255,255,255,0.25), transparent),
        radial-gradient(1.5px 1.5px at 400px 160px, rgba(168,85,247,0.25), transparent);
      background-size: 500px 220px;
      animation: twinkle 10s ease-in-out infinite alternate-reverse;
    }
    
    @keyframes twinkle {
      0% { opacity: 0.4; }
      100% { opacity: 0.8; }
    }
    
    /* ========== AMBIENT EFFECTS ========== */
    .ambient-glow {
      position: fixed;
      width: 400px;
      height: 400px;
      border-radius: 50%;
      filter: blur(120px);
      opacity: 0.06;
      pointer-events: none;
      z-index: 0;
    }
    
    .ambient-cyan { background: var(--cyan); top: -100px; right: -100px; animation: ambientFloat 15s ease-in-out infinite; }
    .ambient-purple { background: var(--purple); bottom: 20%; left: -150px; animation: ambientFloat 18s ease-in-out infinite reverse; }
    
    @keyframes ambientFloat {
      0%, 100% { transform: translate(0, 0); }
      50% { transform: translate(30px, 20px); }
    }
    
    .grain {
      position: fixed;
      inset: 0;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
      opacity: 0.015;
      pointer-events: none;
      z-index: 1000;
    }
    
    .content { position: relative; z-index: 1; }
    
    /* ========== ANIMATIONS ========== */
    @keyframes softPulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.6; }
    }
    
    @keyframes glowBreath {
      0%, 100% { box-shadow: 0 0 20px rgba(34, 211, 238, 0.25), inset 0 0 20px rgba(34, 211, 238, 0.03); }
      50% { box-shadow: 0 0 35px rgba(34, 211, 238, 0.4), inset 0 0 30px rgba(34, 211, 238, 0.05); }
    }
    
    @keyframes slideIn {
      from { opacity: 0; transform: translateY(24px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    @keyframes shimmerFlow {
      0% { background-position: -200% 0; }
      100% { background-position: 200% 0; }
    }
    
    @keyframes borderGlow {
      0%, 100% { border-color: rgba(34, 211, 238, 0.2); }
      50% { border-color: rgba(34, 211, 238, 0.4); }
    }
    
    /* ========== HEADER ========== */
    .header {
      padding: max(16px, env(safe-area-inset-top)) 20px 14px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      animation: fadeIn 0.5s ease;
    }
    
    .header-title {
      font-family: 'Orbitron', sans-serif;
      font-size: 18px;
      font-weight: 800;
      letter-spacing: 3px;
      background: linear-gradient(135deg, #fff 0%, #94a3b8 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    .status-badge {
      display: flex;
      align-items: center;
      gap: 6px;
      margin-top: 4px;
    }
    
    .status-dot {
      width: 5px;
      height: 5px;
      background: var(--green);
      border-radius: 50%;
      box-shadow: 0 0 10px var(--green);
      animation: softPulse 2s ease-in-out infinite;
    }
    
    .status-text {
      font-size: 8px;
      font-weight: 600;
      color: var(--green);
      letter-spacing: 1.5px;
      text-transform: uppercase;
    }
    
    .back-btn {
      width: 38px;
      height: 38px;
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid rgba(255, 255, 255, 0.08);
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #94a3b8;
      transition: all 0.3s ease;
      cursor: pointer;
    }
    
    .back-btn:hover {
      background: rgba(34, 211, 238, 0.08);
      border-color: rgba(34, 211, 238, 0.3);
      color: var(--cyan);
    }
    
    .back-btn:active { transform: scale(0.9); }
    
    .home-btn {
      width: 40px;
      height: 40px;
      background: rgba(245, 158, 11, 0.08);
      border: 1px solid rgba(245, 158, 11, 0.2);
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
    }
    
    .home-btn:active { transform: scale(0.92); background: rgba(245, 158, 11, 0.15); }
    
    /* ========== TIMELINE ========== */
    .timeline-container {
      padding: 8px 0;
      animation: slideIn 0.5s ease 0.1s both;
    }
    
    .timeline {
      display: flex;
      overflow-x: auto;
      scroll-snap-type: x mandatory;
      padding: 8px 16px;
      gap: 8px;
      scrollbar-width: none;
      -webkit-overflow-scrolling: touch;
    }
    
    .timeline::-webkit-scrollbar { display: none; }
    
    .week-chip {
      scroll-snap-align: center;
      flex: 0 0 auto;
      min-width: 46px;
      height: 52px;
      background: rgba(255, 255, 255, 0.02);
      border: 1px solid rgba(255, 255, 255, 0.06);
      border-radius: 10px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
    }
    
    .week-chip:active { transform: scale(0.9); }
    
    .week-chip.active {
      background: linear-gradient(135deg, rgba(34, 211, 238, 0.12) 0%, rgba(34, 211, 238, 0.04) 100%);
      border-color: var(--cyan);
      animation: glowBreath 2.5s ease-in-out infinite;
    }
    
    .week-chip.active::after {
      content: '';
      position: absolute;
      bottom: 5px;
      width: 4px;
      height: 4px;
      background: var(--cyan);
      border-radius: 50%;
      box-shadow: 0 0 8px var(--cyan);
    }
    
    .week-chip.deload {
      border-color: rgba(34, 197, 94, 0.25);
    }
    
    .week-chip.deload .week-label,
    .week-chip.deload .week-num { color: var(--green); }
    
    .week-chip.deload.active {
      background: linear-gradient(135deg, rgba(34, 197, 94, 0.12) 0%, rgba(34, 197, 94, 0.04) 100%);
      border-color: var(--green);
      box-shadow: 0 0 25px rgba(34, 197, 94, 0.2);
    }
    
    .week-chip.peak {
      border-color: rgba(168, 85, 247, 0.25);
    }
    
    .week-chip.peak .week-label,
    .week-chip.peak .week-num { color: var(--purple); }
    
    .week-chip.peak.active {
      background: linear-gradient(135deg, rgba(168, 85, 247, 0.12) 0%, rgba(168, 85, 247, 0.04) 100%);
      border-color: var(--purple);
      box-shadow: 0 0 25px rgba(168, 85, 247, 0.2);
    }
    
    .week-label {
      font-size: 7px;
      font-weight: 700;
      color: #475569;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    .week-num {
      font-family: 'Orbitron', sans-serif;
      font-size: 16px;
      font-weight: 700;
      color: #cbd5e1;
    }
    
    .week-chip.active .week-num {
      color: var(--cyan);
      text-shadow: 0 0 12px var(--cyan);
    }
    
    /* ========== BLOCK HEADER ========== */
    .block-section {
      padding: 12px 20px 8px;
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      animation: slideIn 0.5s ease 0.15s both;
    }
    
    .block-title {
      font-family: 'Orbitron', sans-serif;
      font-size: 22px;
      font-weight: 800;
      color: #fff;
      letter-spacing: 2px;
    }
    
    .block-subtitle {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-top: 4px;
    }
    
    .block-slash {
      color: var(--cyan);
      font-weight: 700;
      font-size: 11px;
    }
    
    .block-info {
      font-size: 9px;
      font-weight: 600;
      color: var(--cyan);
      letter-spacing: 1px;
      text-transform: uppercase;
    }
    
    .sys-chip {
      display: flex;
      align-items: center;
      gap: 5px;
      padding: 6px 10px;
      background: rgba(34, 211, 238, 0.06);
      border: 1px solid rgba(34, 211, 238, 0.15);
      border-radius: 8px;
      animation: borderGlow 3s ease-in-out infinite;
    }
    
    .sys-chip span {
      font-size: 8px;
      font-weight: 700;
      color: var(--cyan);
      letter-spacing: 1px;
    }
    
    /* ========== HERO CARD ========== */
    .hero-card {
      margin: 8px 16px 12px;
      border-radius: 20px;
      overflow: hidden;
      position: relative;
      cursor: pointer;
      animation: slideIn 0.6s ease 0.2s both;
    }
    
    .hero-card:active { transform: scale(0.985); }
    
    .hero-bg {
      position: absolute;
      inset: 0;
      background: url('https://images.unsplash.com/photo-1534438327276-14e5300c3a48?w=900&q=85') center/cover;
      opacity: 0.4;
      filter: saturate(0.8) brightness(0.85);
      transition: all 0.6s ease;
    }
    
    .hero-card:hover .hero-bg { opacity: 0.5; transform: scale(1.03); }
    
    .hero-overlay {
      position: absolute;
      inset: 0;
      background: linear-gradient(180deg, 
        rgba(3, 5, 9, 0.2) 0%, 
        rgba(3, 5, 9, 0.6) 50%,
        rgba(3, 5, 9, 0.92) 100%);
    }
    
    .hero-content {
      position: relative;
      z-index: 2;
      padding: 18px;
      min-height: 240px;
      display: flex;
      flex-direction: column;
    }
    
    .hero-top {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
    }
    
    .priority-tag {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 5px 10px;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      border: 1px solid rgba(245, 158, 11, 0.3);
      border-radius: 20px;
    }
    
    .priority-dot {
      width: 5px;
      height: 5px;
      background: var(--amber);
      border-radius: 50%;
      box-shadow: 0 0 8px var(--amber);
      animation: softPulse 1.5s ease-in-out infinite;
    }
    
    .priority-text {
      font-size: 8px;
      font-weight: 700;
      color: var(--amber);
      letter-spacing: 1px;
      text-transform: uppercase;
    }
    
    .nav-btn {
      width: 34px;
      height: 34px;
      background: rgba(255, 255, 255, 0.06);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
    }
    
    .nav-btn:active { background: rgba(34, 211, 238, 0.15); border-color: var(--cyan); }
    
    .hero-main {
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
      padding: 12px 0;
    }
    
    .hero-day {
      font-family: 'Orbitron', sans-serif;
      font-size: 32px;
      font-weight: 900;
      color: #fff;
      letter-spacing: 3px;
      text-shadow: 0 4px 30px rgba(0, 0, 0, 0.5);
    }
    
    .hero-workout-line {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-top: 6px;
    }
    
    .workout-bar {
      width: 3px;
      height: 16px;
      background: var(--cyan);
      border-radius: 2px;
      box-shadow: 0 0 12px var(--cyan);
    }
    
    .workout-name {
      font-size: 12px;
      font-weight: 600;
      color: var(--cyan);
      letter-spacing: 1.5px;
      text-transform: uppercase;
    }
    
    .technique-badge {
      display: inline-flex;
      align-items: center;
      margin-top: 10px;
      padding: 4px 10px;
      background: rgba(0, 0, 0, 0.4);
      backdrop-filter: blur(6px);
      -webkit-backdrop-filter: blur(6px);
      border: 1px solid rgba(34, 211, 238, 0.25);
      border-radius: 6px;
      width: fit-content;
    }
    
    .technique-badge span {
      font-size: 9px;
      font-weight: 700;
      color: var(--cyan);
      letter-spacing: 1px;
    }
    
    /* ========== METRICS - ULTRA GLASS ========== */
    .metrics-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 6px;
    }
    
    .metric-card {
      background: rgba(255, 255, 255, 0.015);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.04);
      border-radius: 14px;
      padding: 12px 6px;
      text-align: center;
      transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
      position: relative;
      overflow: hidden;
    }
    
    .metric-card::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, rgba(255,255,255,0.03) 0%, transparent 60%);
      pointer-events: none;
    }
    
    .metric-card::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 30%;
      height: 1px;
      background: linear-gradient(90deg, transparent, rgba(34,211,238,0.3), transparent);
      opacity: 0;
      transition: all 0.4s ease;
    }
    
    .metric-card:hover {
      background: rgba(255, 255, 255, 0.03);
      border-color: rgba(34, 211, 238, 0.15);
      transform: translateY(-3px);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    }
    
    .metric-card:hover::after {
      opacity: 1;
      width: 60%;
    }
    
    .metric-icon-wrap {
      width: 28px;
      height: 28px;
      margin: 0 auto 6px;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
    }
    
    .metric-icon-wrap.duration {
      background: rgba(34, 211, 238, 0.1);
      animation: iconPulse 3s ease-in-out infinite;
    }
    
    .metric-icon-wrap.series {
      background: rgba(34, 211, 238, 0.1);
      animation: iconPulse 3s ease-in-out infinite 0.5s;
    }
    
    .metric-icon-wrap.rpe {
      background: rgba(236, 72, 153, 0.1);
      animation: iconPulseRpe 2.5s ease-in-out infinite;
    }
    
    .metric-icon-wrap.xp {
      background: rgba(34, 197, 94, 0.1);
      animation: iconPulseXp 2s ease-in-out infinite;
    }
    
    @keyframes iconPulse {
      0%, 100% { transform: scale(1); box-shadow: 0 0 0 rgba(34, 211, 238, 0); }
      50% { transform: scale(1.05); box-shadow: 0 0 15px rgba(34, 211, 238, 0.2); }
    }
    
    @keyframes iconPulseRpe {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.08); box-shadow: 0 0 12px rgba(236, 72, 153, 0.25); }
    }
    
    @keyframes iconPulseXp {
      0%, 100% { transform: scale(1); box-shadow: 0 0 0 rgba(34, 197, 94, 0); }
      50% { transform: scale(1.1); box-shadow: 0 0 18px rgba(34, 197, 94, 0.3); }
    }
    
    .metric-value {
      font-family: 'Orbitron', sans-serif;
      font-size: 17px;
      font-weight: 700;
      color: #fff;
      line-height: 1;
    }
    
    .metric-value.rpe { color: var(--pink); text-shadow: 0 0 12px rgba(236, 72, 153, 0.4); }
    .metric-value.xp { color: var(--green); text-shadow: 0 0 15px rgba(34, 197, 94, 0.5); }
    
    .metric-label {
      font-size: 7px;
      font-weight: 600;
      color: #64748b;
      letter-spacing: 0.8px;
      text-transform: uppercase;
      margin-top: 4px;
    }
    
    /* ========== ANALYTICS ========== */
    .analytics {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      padding: 0 16px 12px;
      animation: slideIn 0.6s ease 0.3s both;
    }
    
    .analytics-card {
      background: rgba(255, 255, 255, 0.02);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border: 1px solid rgba(255, 255, 255, 0.05);
      border-radius: 16px;
      padding: 14px;
      position: relative;
      overflow: hidden;
      transition: all 0.3s ease;
    }
    
    .analytics-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 1px;
      background: linear-gradient(90deg, transparent, rgba(34, 211, 238, 0.12), transparent);
    }
    
    .analytics-card:hover {
      border-color: rgba(34, 211, 238, 0.15);
      background: rgba(255, 255, 255, 0.03);
    }
    
    .analytics-label {
      font-size: 8px;
      font-weight: 700;
      color: #64748b;
      letter-spacing: 1px;
      text-transform: uppercase;
      margin-bottom: 4px;
    }
    
    .analytics-value {
      font-family: 'Orbitron', sans-serif;
      font-size: 26px;
      font-weight: 800;
      color: #fff;
    }
    
    .analytics-unit {
      font-size: 11px;
      font-weight: 600;
      color: #64748b;
      margin-left: 2px;
    }
    
    .analytics-trend {
      display: flex;
      align-items: center;
      gap: 4px;
      margin-top: 4px;
      font-size: 9px;
      font-weight: 600;
      color: var(--green);
    }
    
    .analytics-icon {
      position: absolute;
      right: 12px;
      top: 50%;
      transform: translateY(-50%);
      opacity: 0.15;
    }
    
    .progress-bar {
      margin-top: 8px;
      height: 3px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 2px;
      overflow: hidden;
    }
    
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--cyan), var(--green));
      border-radius: 2px;
      background-size: 200% 100%;
      animation: shimmerFlow 3s linear infinite;
    }
    
    /* ========== MISSIONS LIST ========== */
    .missions {
      padding: 0 16px 120px;
      animation: slideIn 0.6s ease 0.35s both;
    }
    
    .missions-header {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 10px;
    }
    
    .missions-bar {
      width: 3px;
      height: 10px;
      background: var(--cyan);
      border-radius: 2px;
      box-shadow: 0 0 8px var(--cyan);
    }
    
    .missions-title {
      font-size: 9px;
      font-weight: 700;
      color: #64748b;
      letter-spacing: 1.2px;
      text-transform: uppercase;
    }
    
    .mission-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 14px 16px;
      background: rgba(255, 255, 255, 0.008);
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      border: 1px solid rgba(255, 255, 255, 0.03);
      border-radius: 16px;
      margin-bottom: 10px;
      cursor: pointer;
      transition: all 0.35s cubic-bezier(0.16, 1, 0.3, 1);
      position: relative;
      overflow: hidden;
    }
    
    .mission-item::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 1px;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.05), transparent);
    }
    
    .mission-item::after {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, rgba(255,255,255,0.02) 0%, transparent 50%);
      pointer-events: none;
    }
    
    .mission-item:active { transform: scale(0.97); }
    
    .mission-item:hover { 
      background: rgba(255, 255, 255, 0.02);
      border-color: rgba(34, 211, 238, 0.1);
      transform: translateX(4px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15), 0 0 0 1px rgba(34, 211, 238, 0.05);
    }
    
    .mission-icon {
      width: 42px;
      height: 42px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      position: relative;
      transition: all 0.3s ease;
    }
    
    .mission-item:hover .mission-icon {
      transform: scale(1.05);
    }
    
    .mission-icon.cyan { 
      background: rgba(34, 211, 238, 0.08); 
      border: 1px solid rgba(34, 211, 238, 0.15);
      box-shadow: 0 0 20px rgba(34, 211, 238, 0.08);
    }
    .mission-icon.pink { 
      background: rgba(236, 72, 153, 0.08); 
      border: 1px solid rgba(236, 72, 153, 0.15);
      box-shadow: 0 0 20px rgba(236, 72, 153, 0.08);
    }
    .mission-icon.purple { 
      background: rgba(168, 85, 247, 0.08); 
      border: 1px solid rgba(168, 85, 247, 0.15);
      box-shadow: 0 0 20px rgba(168, 85, 247, 0.08);
    }
    .mission-icon.amber { 
      background: rgba(245, 158, 11, 0.08); 
      border: 1px solid rgba(245, 158, 11, 0.15);
      box-shadow: 0 0 20px rgba(245, 158, 11, 0.08);
    }
    
    .mission-body { flex: 1; min-width: 0; }
    
    .mission-meta {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 3px;
    }
    
    .mission-tech {
      font-size: 8px;
      font-weight: 700;
      color: var(--cyan);
      padding: 2px 6px;
      background: rgba(34, 211, 238, 0.08);
      border: 1px solid rgba(34, 211, 238, 0.15);
      border-radius: 4px;
      letter-spacing: 0.5px;
    }
    
    .mission-day-label {
      font-size: 8px;
      font-weight: 600;
      color: #64748b;
      letter-spacing: 0.5px;
      text-transform: uppercase;
    }
    
    .mission-name {
      font-family: 'Orbitron', sans-serif;
      font-size: 13px;
      font-weight: 700;
      color: #fff;
      letter-spacing: 0.5px;
    }
    
    .mission-stats {
      display: flex;
      gap: 14px;
      margin-top: 6px;
    }
    
    .mission-stat-label {
      font-size: 7px;
      font-weight: 600;
      color: #475569;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    .mission-stat-value {
      font-family: 'Orbitron', sans-serif;
      font-size: 12px;
      font-weight: 600;
      color: #e2e8f0;
    }
    
    .mission-rpe {
      text-align: right;
      margin-left: auto;
    }
    
    .mission-rpe-value {
      font-family: 'Orbitron', sans-serif;
      font-size: 15px;
      font-weight: 700;
      color: var(--pink);
    }
    
    .mission-rpe-label {
      font-size: 7px;
      font-weight: 600;
      color: #475569;
      text-transform: uppercase;
    }
    
    .mission-action {
      width: 32px;
      height: 32px;
      background: rgba(34, 211, 238, 0.08);
      border: 1px solid rgba(34, 211, 238, 0.15);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      transition: all 0.2s ease;
    }
    
    .mission-item:hover .mission-action {
      background: rgba(34, 211, 238, 0.15);
      box-shadow: 0 0 15px rgba(34, 211, 238, 0.2);
    }
  </style>
</head>

<body>
  <!-- STARFIELD -->
  <div class="starfield">
    <div class="stars"></div>
    <div class="stars-2"></div>
  </div>
  
  <!-- AMBIENT -->
  <div class="ambient-glow ambient-cyan"></div>
  <div class="ambient-glow ambient-purple"></div>
  <div class="grain"></div>
  
  <div class="content">
    <!-- HEADER -->
    <header class="header">
      <div style="display: flex; align-items: center; gap: 12px;">
        <button class="back-btn" onclick="location.href='index.html'">
          <i data-lucide="arrow-left" class="w-4 h-4"></i>
        </button>
        <div>
          <h1 class="header-title">OPÉRATIONS</h1>
          <div class="status-badge">
            <div class="status-dot"></div>
            <span class="status-text">NET_LINK_ACTIVE</span>
          </div>
        </div>
      </div>
      <button class="home-btn" onclick="location.href='index.html'">
        <i data-lucide="trophy" class="w-4 h-4 text-amber-400"></i>
      </button>
    </header>
    
    <!-- TIMELINE 26 WEEKS -->
    <div class="timeline-container">
      <div class="timeline" id="timeline"></div>
    </div>
    
    <!-- BLOCK INFO -->
    <section class="block-section">
      <div>
        <h2 class="block-title" id="block-name">FONDATIONS</h2>
        <div class="block-subtitle">
          <span class="block-slash">//</span>
          <span class="block-info" id="block-info">BLOC 1 • VOLUME & TECHNIQUE</span>
        </div>
      </div>
      <div class="sys-chip">
        <i data-lucide="cpu" class="w-3 h-3 text-cyan-400"></i>
        <span>SYS.READY</span>
      </div>
    </section>
    
    <!-- HERO MISSION -->
    <article class="hero-card" id="hero-card">
      <div class="hero-bg"></div>
      <div class="hero-overlay"></div>
      <div class="hero-content">
        <div class="hero-top">
          <div class="priority-tag">
            <div class="priority-dot"></div>
            <span class="priority-text">Priorité Alpha</span>
          </div>
          <button class="nav-btn" id="nav-btn">
            <i data-lucide="chevron-right" class="w-4 h-4 text-white/70"></i>
          </button>
        </div>
        
        <div class="hero-main">
          <h3 class="hero-day" id="hero-day">DIMANCHE</h3>
          <div class="hero-workout-line">
            <div class="workout-bar"></div>
            <span class="workout-name" id="hero-workout">DOS + JAMBES</span>
          </div>
          <div class="technique-badge">
            <span id="hero-technique">TEMPO 3-1-2</span>
          </div>
        </div>
        
        <div class="metrics-grid">
          <div class="metric-card">
            <div class="metric-icon-wrap duration">
              <i data-lucide="timer" class="w-4 h-4 text-cyan-400"></i>
            </div>
            <div class="metric-value" id="hero-duration">68m</div>
            <div class="metric-label">Durée</div>
          </div>
          <div class="metric-card">
            <div class="metric-icon-wrap series">
              <i data-lucide="layers-3" class="w-4 h-4 text-cyan-400"></i>
            </div>
            <div class="metric-value" id="hero-sets">31</div>
            <div class="metric-label">Séries</div>
          </div>
          <div class="metric-card">
            <div class="metric-icon-wrap rpe">
              <i data-lucide="flame" class="w-4 h-4 text-pink-400"></i>
            </div>
            <div class="metric-value rpe" id="hero-rpe">6-7</div>
            <div class="metric-label">RPE</div>
          </div>
          <div class="metric-card">
            <div class="metric-icon-wrap xp">
              <i data-lucide="sparkles" class="w-4 h-4 text-green-400"></i>
            </div>
            <div class="metric-value xp" id="hero-xp">+620</div>
            <div class="metric-label">XP</div>
          </div>
        </div>
      </div>
    </article>
    
    <!-- ANALYTICS -->
    <section class="analytics">
      <div class="analytics-card">
        <div class="analytics-label">Meilleur Perf</div>
        <div>
          <span class="analytics-value">140</span>
          <span class="analytics-unit">KG</span>
        </div>
        <div class="analytics-trend">
          <i data-lucide="trending-up" class="w-3 h-3"></i>
          +2.5% vs Sem 3
        </div>
        <i data-lucide="trophy" class="w-6 h-6 analytics-icon"></i>
      </div>
      <div class="analytics-card">
        <div class="analytics-label">Volume Hebdo</div>
        <div>
          <span class="analytics-value">42</span>
          <span class="analytics-unit">T</span>
        </div>
        <div class="progress-bar">
          <div class="progress-fill" style="width: 78%"></div>
        </div>
        <i data-lucide="bar-chart-3" class="w-6 h-6 analytics-icon"></i>
      </div>
    </section>
    
    <!-- OTHER MISSIONS -->
    <section class="missions">
      <div class="missions-header">
        <div class="missions-bar"></div>
        <span class="missions-title">Autres Missions</span>
      </div>
      <div id="missions-list"></div>
    </section>
  </div>

  <script>
    const days = ['dimanche', 'mardi', 'vendredi', 'maison'];
    const dayLabels = { dimanche: 'DIMANCHE', mardi: 'MARDI', vendredi: 'VENDREDI', maison: 'MAISON' };
    const dayIcons = { dimanche: 'zap', mardi: 'dumbbell', vendredi: 'activity', maison: 'home' };
    const dayColors = { dimanche: 'cyan', mardi: 'pink', vendredi: 'purple', maison: 'amber' };
    
    let currentWeek = 1;
    let currentDayIndex = 0;
    
    function initIcons() {
      if (typeof lucide !== 'undefined') lucide.createIcons();
    }
    
    function buildTimeline() {
      const container = document.getElementById('timeline');
      container.innerHTML = '';
      
      for (let i = 1; i <= 26; i++) {
        const weekData = window.programData ? programData.getWeek(i) : { isDeload: [6,12,18,24,26].includes(i) };
        const isDeload = weekData.isDeload || [6,12,18,24,26].includes(i);
        const isPeak = i === 25;
        
        let cls = 'week-chip';
        if (i === currentWeek) cls += ' active';
        if (isDeload) cls += ' deload';
        if (isPeak) cls += ' peak';
        
        const label = isDeload ? 'DELOAD' : (isPeak ? 'PEAK' : 'SEM');
        
        const chip = document.createElement('div');
        chip.className = cls;
        chip.innerHTML = `<span class="week-label">${label}</span><span class="week-num">${i}</span>`;
        chip.onclick = () => selectWeek(i);
        container.appendChild(chip);
      }
      
      setTimeout(() => {
        const active = container.querySelector('.active');
        if (active) active.scrollIntoView({ behavior: 'smooth', inline: 'center', block: 'nearest' });
      }, 200);
    }
    
    function selectWeek(week) {
      currentWeek = week;
      currentDayIndex = 0;
      localStorage.setItem('hybrid_current_week', week);
      
      document.querySelectorAll('.week-chip').forEach((c, i) => {
        c.classList.toggle('active', i + 1 === week);
      });
      
      updateContent();
    }
    
    function updateContent() {
      if (!window.programData) return;
      
      const weekData = programData.getWeek(currentWeek);
      const blockNames = {1: 'FONDATIONS', 2: 'INTENSIFICATION', 3: 'PUISSANCE', 4: 'PEAK'};
      
      document.getElementById('block-name').textContent = blockNames[weekData.block] || 'FONDATIONS';
      document.getElementById('block-info').textContent = `BLOC ${weekData.block} • ${weekData.technique}`;
      
      updateHero();
      renderMissions();
      initIcons();
    }
    
    function updateHero() {
      if (!window.programData) return;
      
      const weekData = programData.getWeek(currentWeek);
      const day = days[currentDayIndex];
      const workout = weekData[day];
      
      if (!workout) {
        currentDayIndex = 0;
        updateHero();
        return;
      }
      
      document.getElementById('hero-day').textContent = dayLabels[day];
      document.getElementById('hero-workout').textContent = workout.name;
      document.getElementById('hero-technique').textContent = weekData.technique.split('+')[0].trim();
      document.getElementById('hero-duration').textContent = workout.duration + 'm';
      document.getElementById('hero-sets').textContent = workout.totalSets;
      document.getElementById('hero-rpe').textContent = weekData.rpeTarget;
      document.getElementById('hero-xp').textContent = '+' + (workout.totalSets * 20);
      
      initIcons();
    }
    
    function renderMissions() {
      const container = document.getElementById('missions-list');
      container.innerHTML = '';
      
      if (!window.programData) return;
      
      const weekData = programData.getWeek(currentWeek);
      
      days.forEach((day, idx) => {
        if (idx === currentDayIndex) return;
        
        const workout = weekData[day];
        if (!workout) return;
        
        const item = document.createElement('div');
        item.className = 'mission-item';
        item.onclick = () => location.href = `briefing.html?week=${currentWeek}&day=${day}`;
        
        item.innerHTML = `
          <div class="mission-icon ${dayColors[day]}">
            <i data-lucide="${dayIcons[day]}" class="w-5 h-5 text-${dayColors[day]}-400"></i>
          </div>
          <div class="mission-body">
            <div class="mission-meta">
              <span class="mission-tech">${weekData.technique.split('+')[0].trim()}</span>
              <span class="mission-day-label">${dayLabels[day]}</span>
            </div>
            <div class="mission-name">${workout.name}</div>
            <div class="mission-stats">
              <div>
                <div class="mission-stat-label">Durée</div>
                <div class="mission-stat-value">${workout.duration}m</div>
              </div>
              <div>
                <div class="mission-stat-label">Séries</div>
                <div class="mission-stat-value">${workout.totalSets}</div>
              </div>
              <div>
                <div class="mission-stat-label">XP</div>
                <div class="mission-stat-value" style="color: var(--green);">+${workout.totalSets * 20}</div>
              </div>
            </div>
          </div>
          <div class="mission-rpe">
            <div class="mission-rpe-value">${weekData.rpeTarget}</div>
            <div class="mission-rpe-label">RPE</div>
          </div>
          <div class="mission-action">
            <i data-lucide="eye" class="w-4 h-4 text-cyan-400"></i>
          </div>
        `;
        
        container.appendChild(item);
      });
      
      initIcons();
    }
    
    function init() {
      currentWeek = parseInt(localStorage.getItem('hybrid_current_week') || '1');
      
      buildTimeline();
      
      if (window.programData) {
        updateContent();
      }
      
      document.getElementById('hero-card').onclick = (e) => {
        if (e.target.closest('.nav-btn')) return;
        location.href = `briefing.html?week=${currentWeek}&day=${days[currentDayIndex]}`;
      };
      
      document.getElementById('nav-btn').onclick = (e) => {
        e.stopPropagation();
        currentDayIndex = (currentDayIndex + 1) % days.length;
        updateHero();
      };
      
      initIcons();
    }
    
    function waitForData() {
      if (window.programData && programData.getWeek) {
        updateContent();
      } else {
        setTimeout(waitForData, 50);
      }
    }
    
    function initScrambleEffects() {
      if (!window.ScrambleEffect) return;
      const blockName = document.getElementById('block-name');
      const headerTitle = document.querySelector('.header-title');
      const heroDay = document.getElementById('hero-day');
      const heroWorkout = document.getElementById('hero-workout');
      
      if (headerTitle) ScrambleEffect.scramble(headerTitle, { delay: 0, speed: 25 });
      if (blockName) ScrambleEffect.scramble(blockName, { delay: 150, speed: 30 });
      if (heroDay) ScrambleEffect.scramble(heroDay, { delay: 300, speed: 35 });
      if (heroWorkout) ScrambleEffect.scramble(heroWorkout, { delay: 450, speed: 25 });
    }
    
    document.addEventListener('DOMContentLoaded', () => {
      init();
      waitForData();
      setTimeout(initScrambleEffects, 100);
    });
  </script>
</body>
</html>
